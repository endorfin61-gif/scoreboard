<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyDozVuSqO2dxX3lH_xRwpJ9BpVib0ZsW7NDSoJ7lnRjxlz2pPBgGHhmMXJKPeGIxpGgA/exec";

let lastA = null, lastB = null;

function bump(el){
  el.classList.remove("bump");
  void el.offsetWidth;
  el.classList.add("bump");
}

window.onState = function(s){
  // обнови тут свои поля как у тебя в html
  document.getElementById("title").textContent = s.title || "";
  document.getElementById("nameA").textContent = s.teamA?.name ?? "";
  document.getElementById("nameB").textContent = s.teamB?.name ?? "";

  const a = s.teamA?.score ?? 0;
  const b = s.teamB?.score ?? 0;

  const sa = document.getElementById("scoreA");
  const sb = document.getElementById("scoreB");

  if (lastA !== null && a !== lastA) bump(sa);
  if (lastB !== null && b !== lastB) bump(sb);
  lastA = a; lastB = b;

  sa.textContent = a;
  sb.textContent = b;

  document.getElementById("barA").style.background = s.teamA?.color || "#1e88e5";
  document.getElementById("barB").style.background = s.teamB?.color || "#e53935";

  const liveBadge = document.getElementById("liveBadge");
  if (liveBadge) liveBadge.style.display = s.live ? "" : "none";

  const status = document.getElementById("status");
  if (status) {
    const st = (s.status || "").trim();
    status.style.display = st ? "" : "none";
    status.textContent = st;
  }

  // логотипы (если ты их уже добавил)
  const logoA = document.getElementById("logoA");
  const logoWrapA = document.getElementById("logoWrapA");
  if (logoA && logoWrapA){
    const urlA = (s.teamA?.logo || "").trim();
    if (urlA) { logoA.src = urlA; logoWrapA.style.display = ""; }
    else { logoA.removeAttribute("src"); logoWrapA.style.display = "none"; }
  }

  const logoB = document.getElementById("logoB");
  const logoWrapB = document.getElementById("logoWrapB");
  if (logoB && logoWrapB){
    const urlB = (s.teamB?.logo || "").trim();
    if (urlB) { logoB.src = urlB; logoWrapB.style.display = ""; }
    else { logoB.removeAttribute("src"); logoWrapB.style.display = "none"; }
  }
};

function poll(){
  const old = document.getElementById("jsonp");
  if (old) old.remove();

  const s = document.createElement("script");
  s.id = "jsonp";
  s.src = API_URL + "?callback=onState&t=" + Date.now();
  document.body.appendChild(s);

  setTimeout(poll, 700); // можно 1000 для меньше трафика
}
poll();
</script>

.score.bump{ animation: bump .22s ease-out; }
@keyframes bump{ 0%{transform:scale(1)} 40%{transform:scale(1.12)} 100%{transform:scale(1)} }